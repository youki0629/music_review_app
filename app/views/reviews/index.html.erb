<div class="container">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1 class="mb-0">„É¨„Éì„É•„Éº‰∏ÄË¶ß</h1>
    <%= link_to "Êñ∞„Åó„ÅÑ„É¨„Éì„É•„Éº„ÇíÊäïÁ®ø", new_review_path, 
        class: "btn btn-primary" %>
  </div>

  <!-- üîç „Åì„Åì„Å´Ê§úÁ¥¢„Éï„Ç©„Éº„É†„ÇíËøΩÂä† -->
  <div class="search-form mb-4">
    <%= form_with url: reviews_path, method: :get, local: true, class: "card" do |f| %>
      <div class="card-body">
        <div class="row g-3">
          <!-- „Ç≠„Éº„ÉØ„Éº„ÉâÊ§úÁ¥¢ -->
          <div class="col-md-4">
            <%= f.text_field :keyword, 
                placeholder: "„Çø„Ç§„Éà„É´„ÇÑ„Ç¢„Éº„ÉÜ„Ç£„Çπ„Éà„ÅßÊ§úÁ¥¢", 
                value: params[:keyword], 
                class: "form-control" %>
          </div>
          
          <!-- „Ç∏„É£„É≥„É´Ê§úÁ¥¢ -->
          <div class="col-md-3">
            <%= f.select :genre, 
                options_for_select([['ÂÖ®„Ç∏„É£„É≥„É´', '']] + @search_genres.map {|g| [g, g]}, params[:genre]),
                {}, { class: "form-select" } %>
          </div>
          
          <!-- „ÇΩ„Éº„ÉàÊ©üËÉΩ -->
          <div class="col-md-3">
            <%= f.select :sort, 
                options_for_select([
                  ['Êñ∞„Åó„ÅÑÈ†Ü', 'created_at_desc'],
                  ['Âè§„ÅÑÈ†Ü', 'created_at_asc'],
                  ['„Çø„Ç§„Éà„É´È†Ü', 'title_asc'],
                  ['„Ç¢„Éº„ÉÜ„Ç£„Çπ„ÉàÈ†Ü', 'artist_asc']
                ], params[:sort]),
                {}, { class: "form-select" } %>
          </div>
          
          <!-- Ê§úÁ¥¢„Éú„Çø„É≥ -->
          <div class="col-md-2">
            <%= f.submit "Ê§úÁ¥¢", class: "btn btn-primary w-100" %>
          </div>
        </div>
        
        <!-- Ê§úÁ¥¢Êù°‰ª∂„ÅÆË°®Á§∫„Å®„É™„Çª„ÉÉ„Éà -->
        <% if params[:keyword].present? || params[:genre].present? || params[:sort].present? %>
          <div class="mt-3 d-flex justify-content-between align-items-center">
            <small class="text-muted">
              Ê§úÁ¥¢Êù°‰ª∂: 
              <%= "„Äå#{params[:keyword]}„Äç" if params[:keyword].present? %>
              <%= "„Ç∏„É£„É≥„É´: #{params[:genre]}" if params[:genre].present? %>
            </small>
            <%= link_to "Ê§úÁ¥¢Êù°‰ª∂„Çí„É™„Çª„ÉÉ„Éà", reviews_path, 
                class: "btn btn-outline-secondary btn-sm" %>
          </div>
        <% end %>
      </div>
    <% end %>
  </div>
  <!-- üîç „Åì„Åì„Åæ„Åß -->

  <% if @reviews.any? %>
    <!-- ‰ª•‰∏ã„ÄÅ„É¨„Éì„É•„Éº‰∏ÄË¶ßË°®Á§∫ÈÉ®ÂàÜ„ÅØ„Åù„ÅÆ„Åæ„Åæ -->
    <div class="row">
      <% @reviews.each do |review| %>
       <%= render 'review', review: review %>
      <% end %>
    </div>

    <%= paginate @reviews, theme: 'bootstrap-5' %>
  <% else %>
    <div class="text-center py-5">
      <p class="text-muted mb-3">„Åæ„Å†„É¨„Éì„É•„Éº„ÅåÊäïÁ®ø„Åï„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì„ÄÇ</p>
      <%= link_to "ÊúÄÂàù„ÅÆ„É¨„Éì„É•„Éº„ÇíÊäïÁ®ø„Åô„Çã", new_review_path, 
          class: "btn btn-primary" %>
    </div>
  <% end %>
</div>
